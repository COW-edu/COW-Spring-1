# WEEK6

### 관계형 데이터베이스란?

- 관계형 데이터베이스(Relational Database)는 데이터를 구조화하고 저장하기 위한 고전적인 데이터베이스 형식 중 하나이다.
- 이 데이터베이스는 테이블 형식의 데이터 구조를 사용하여 데이터를 효율적으로 관리하며, 데이터 간의 관계를 정의하여 정보를 저장, 검색 및 관리한다.
- 관계형 데이터베이스 시스템은 데이터베이스 관리 시스템(DBMS)을 통해 운영되며, SQL(Structured Query Language)을 사용하여 데이터 조작 및 검색 작업을 수행한다.
- **테이블(Table)**: 데이터는 테이블로 구성되며, 각 테이블은 행과 열로 구성된다. 행은 레코드를 나타내며, 열은 레코드의 속성(필드)을 나타낸다.
- **열(Column)**: 테이블의 각 열은 특정 데이터 유형에 대한 정보를 포함하며, 각 열은 데이터의 속성을 나타낸다. 예를 들어, 고객 테이블의 열은 이름, 나이, 주소 등과 같은 정보를 포함할 수 있다.
- **행(Row)**: 테이블의 각 행은 개별 레코드를 나타낸다. 각 행은 테이블의 열에 해당하는 값들을 포함하며, 각 레코드는 고유한 식별자(Primary Key)에 의해 식별된다.
- **기본 키(Primary Key)**: 각 테이블에서 고유한 레코드를 식별하기 위해 사용되는 열이다. 기본 키는 중복되지 않으며, 데이터를 빠르게 검색하고 관리하는 데 도움을 준다.
- **외래 키(Foreign Key)**: 다른 테이블과의 관계를 나타내는 열로, 다른 테이블의 기본 키와 연결된다. 외래 키를 사용하여 테이블 간의 관계를 정의하고 데이터의 무결성을 유지할 수 있다.
- **정규화(Normalization)**: 데이터베이스 설계 과정 중에 데이터를 구조화하여 중복을 최소화하고 데이터의 일관성과 무결성을 보장하기 위한 과정이다. 주로 기본 키와 함수적 종속성에 기반하여 수행된다.
- **SQL(Structured Query Language)**: 데이터베이스에 데이터를 삽입, 수정, 삭제 및 검색하기 위해 사용되는 언어이다. SQL은 관계형 데이터베이스에서 표준적으로 사용되며, 데이터 조작과 정의에 대한 다양한 기능을 제공한다.
- **데이터 무결성(Data Integrity)**: 관계형 데이터베이스는 데이터의 무결성을 보장하기 위해 다양한 제약 조건을 사용한다. 이러한 제약 조건은 데이터의 정확성과 일관성을 유지하는 데 도움을 준다.
- **질의(Query)**: 데이터를 검색하기 위해 SQL을 사용하여 생성되는 요청이다. 사용자는 질의를 통해 데이터베이스에서 원하는 정보를 추출할 수 있다.
- **관계(Join)**: 두 개 이상의 테이블 간의 데이터를 연결하여 하나의 결과 집합을 생성하는 작업이다. 관계 연산은 데이터베이스에서 복잡한 질의와 분석을 수행하는 데 사용된다.
- 관계형 데이터베이스는 여러 산업 및 응용 분야에서 널리 사용되며, 데이터의 구조와 관계를 명확하게 정의하고 유지함으로써 데이터 관리의 효율성과 일관성을 보장한다.

### ddl, dml, dcl

- 관계형 데이터베이스에서 데이터를 정의, 조작 및 제어하는 작업은 크게 세 가지 범주로 나눌 수 있다
- 데이터 정의 언어(DDL), 데이터 조작 언어(DML), 데이터 제어 언어(DCL)이다.
- 각각의 언어는 데이터베이스 관리 시스템(DBMS)을 통해 데이터베이스를 효율적으로 관리하기 위해 사용된다.
- **데이터 정의 언어 (DDL - Data Definition Language)**
    - DDL은 데이터베이스 구조를 정의하고 관리하기 위한 언어이다.
    - 이 언어를 사용하여 데이터베이스 내부 구조, 테이블, 인덱스, 제약 조건 등을 생성, 수정 및 삭제할 수 있다.
    - **`CREATE`**: 새로운 데이터베이스 객체(테이블, 뷰, 인덱스 등)를 생성한다.
    - **`ALTER`**: 기존 데이터베이스 객체의 구조를 변경한다.
    - **`DROP`**: 데이터베이스 객체를 삭제한다.
    - **`RENAME`**: 데이터베이스 객체의 이름을 변경한다.
    
    ```sql
    CREATE TABLE Employees (
        EmployeeID INT PRIMARY KEY,
        FirstName VARCHAR(50),
        LastName VARCHAR(50),
        DepartmentID INT
    );
    
    ALTER TABLE Employees ADD COLUMN Email VARCHAR(100);
    
    DROP TABLE Employees;
    ```
    
- **데이터 조작 언어 (DML - Data Manipulation Language)**
    - DML은 데이터를 쿼리하고 조작하기 위한 언어로, 데이터베이스의 내용을 조회, 삽입, 수정 및 삭제하는 작업에 사용된다.
    - 주로 SQL 문을 사용하여 데이터 조작 작업을 수행한다.
    - **`SELECT`**: 데이터베이스에서 정보를 검색한다.
    - **`INSERT`**: 새로운 레코드를 데이터베이스에 삽입한다.
    - **`UPDATE`**: 기존 레코드의 값을 수정한다.
    - **`DELETE`**: 데이터베이스에서 레코드를 삭제한다.
    
    ```sql
    SELECT FirstName, LastName FROM Employees WHERE DepartmentID = 1;
    
    INSERT INTO Employees (EmployeeID, FirstName, LastName, DepartmentID) VALUES (1, 'John', 'Doe', 1);
    
    UPDATE Employees SET DepartmentID = 2 WHERE LastName = 'Doe';
    
    DELETE FROM Employees WHERE EmployeeID = 1;
    ```
    
- **데이터 제어 언어 (DCL - Data Control Language)**
    - DCL은 데이터베이스의 사용 권한을 관리하고 데이터의 무결성을 보장하기 위한 언어이다.
    - 주로 데이터에 대한 접근 권한을 부여하거나 취소하는 데 사용된다.
    - **`GRANT`**: 데이터베이스 사용자에게 특정 작업에 대한 권한을 부여한다.
    - **`REVOKE`**: 데이터베이스 사용자로부터 특정 작업에 대한 권한을 취소한다.
    
    ```sql
    GRANT SELECT ON Employees TO User1;
    
    REVOKE INSERT ON Employees FROM User2;
    ```
    
- 데이터 정의 언어 (DDL), 데이터 조작 언어 (DML), 데이터 제어 언어 (DCL)는 데이터베이스 시스템을 효과적으로 관리하고 조작하기 위한 강력한 도구들이다.

### 엔터티, 테이블, 필드, 레코드

- 엔터티(Entity), 테이블(Table), 필드(Field), 레코드(Record)는 관계형 데이터베이스에서 데이터 구조를 구성하는 중요한 구성 요소이다.
- **엔터티 (Entity)**
    - 엔터티는 데이터베이스에서 저장하고 관리하려는 개별적인 사물, 개념 또는 사건을 나타내는 추상적인 개념이다.
    - 예를 들어, "고객", "주문", "제품"과 같은 개체는 모두 엔터티가 될 수 있다.
    - 엔터티는 특성을 가지며, 이러한 특성은 데이터베이스의 필드로 매핑된다.
- **테이블 (Table)**
    - 테이블은 관계형 데이터베이스에서 데이터를 구조화하여 저장하는 데 사용되는 구조이다.
    - 테이블은 엔터티의 실제 구현체로, 행과 열로 구성된다.
    - 행은 레코드(Record)를 나타내며, 열은 필드(Field)를 나타낸다.
    - 각 테이블은 고유한 이름을 가지며, 테이블을 통해 데이터가 저장되고 관리된다.
- **필드 (Field)**
    - 필드는 테이블의 열(Column)을 의미하며, 테이블의 각 열은 데이터베이스 내에서 특정한 종류의 정보를 저장한다.
    - 예를 들어, "고객" 테이블의 필드에는 "이름", "나이", "주소"와 같은 정보가 포함될 수 있다.
    - 각 필드는 특정 데이터 유형과 제약 조건을 가질 수 있습니다.
- **레코드 (Record)**
    - 레코드는 테이블의 행(Row)을 의미하며, 개별 데이터 항목을 나타낸다.
    - 예를 들어, "고객" 테이블의 각 레코드는 특정 고객의 정보를 담고 있다.
    - 레코드는 테이블의 열(필드)에 해당하는 값들을 포함하며, 기본 키(Primary Key)에 의해 고유하게 식별된다.
- "고객" 엔터티를 관리하기 위해 데이터베이스에 "Customers" 테이블을 생성할 수 있다.

| CustomerID | FirstName | LastName | Age | Address |
| --- | --- | --- | --- | --- |
| 1 | John | Doe | 30 | 123 Main St |
| 2 | Jane | Smith | 25 | 456 Elm Ave |
- 위 테이블에서 "CustomerID", "FirstName", "LastName", "Age", "Address"는 필드이며, 각 레코드는 특정 고객의 정보를 나타낸다.
- 이렇게 엔터티, 테이블, 필드, 레코드는 데이터베이스 내에서 데이터를 구조화하고 관리하는 데 필수적인 요소들이다.

### 키(기본키, 외래키)

- 데이터베이스에서 키는 데이터를 식별하고 관계를 정의하는 데 사용되는 중요한 개념이다.
- 주요 키 유형으로 기본 키(Primary Key)와 외래 키(Foreign Key)가 있다.
- **기본 키 (Primary Key)**
    - 기본 키는 테이블 내에서 각 레코드를 고유하게 식별하는 역할을 한다.
    - 기본 키는 중복되지 않는 값이어야 하며, 각 레코드마다 반드시 존재해야 한다.
    - 기본 키는 해당 테이블에서 레코드를 식별하고 검색하는 데 사용된다.
    - 기본 키는 테이블 내에서 유일한 값이어야 한다.
    - 기본 키는 NULL 값을 가질 수 없다.
    - 하나의 테이블에는 하나의 기본 키만 존재해야 한다.
    - 예를 들어, "고객" 테이블에서 "CustomerID"가 기본 키라면, 각 고객의 레코드는 고유한 "CustomerID" 값을 가져야 한다.
- **외래 키 (Foreign Key)**
    - 외래 키는 한 테이블의 기본 키를 다른 테이블에서 참조하는 역할을 한다.
    - 외래 키를 사용하여 두 테이블 간의 관계를 정의하고 연결할 수 있다.
    - 외래 키는 다른 테이블의 기본 키와 일치해야 한다.
    - 이를 통해 관계형 데이터베이스에서 테이블 간의 관계를 구축하고 데이터 무결성을 유지할 수 있다.
    - 외래 키는 NULL 값을 가질 수 있다.
    - 이는 관련된 레코드가 없을 수도 있음을 나타낸다.
    - 외래 키를 사용하여 테이블 간의 일대일, 일대다, 다대다 관계를 나타낼 수 있다.
    - 예를 들어, "주문" 테이블에서 "CustomerID"가 외래 키라면, 각 주문은 특정 고객의 "CustomerID" 값을 참조한다.
- 기본 키와 외래 키는 데이터베이스 설계에서 중요한 역할을 한다.
- 기본 키는 레코드 식별과 데이터의 고유성을 보장하며, 외래 키는 테이블 간의 관계를 구성하고 데이터의 무결성을 유지하기 위해 사용된다.
- 이러한 키의 개념은 데이터베이스의 구조를 정의하고 관리하는 데 필수적이다.

### 관계(1:1, 1:N, N:M)

- 관계형 데이터베이스에서 테이블 간의 관계는 주로 세 가지 유형으로 나뉜다.
- 일대일(1:1), 일대다(1:N), 다대다(N:M) 관계이다.
- **일대일(1:1) 관계**
    - 일대일 관계는 한 테이블의 레코드가 다른 테이블의 레코드와 하나씩 대응하는 관계이다.
    - 즉, 한 쪽 테이블의 각 레코드는 다른 테이블의 하나의 레코드와만 연결된다.
    - 이러한 관계는 주로 두 엔터티 간에 밀접한 연관성이 있는 경우 사용된다.
- **일대다(1:N) 관계**
    - 일대다 관계는 한 테이블의 레코드가 다른 테이블의 여러 레코드와 연결되는 관계이다.
    - 즉, 한 쪽 테이블의 각 레코드는 다른 테이블의 여러 레코드와 연결될 수 있다.
    - 이러한 관계는 주로 부모-자식 관계를 나타내는 경우 사용된다.
- **다대다(N:M) 관계**
    - 다대다 관계는 한 테이블의 레코드가 다른 테이블의 여러 레코드와 연결되며, 그 역도 성립하는 관계이다.
    - 다대다 관계는 보통 중개 테이블을 사용하여 구현된다.
- 이러한 관계 유형은 데이터베이스 설계 및 데이터의 구조화에서 중요한 역할을 한다.
- 효율적인 관계 설계는 데이터베이스의 유연성과 정확성을 보장하는 데 기여한다.

### WHERE, GROUP BY, HAVING, ORDER BY

- SQL(Structured Query Language)에서 데이터를 조작하고 검색하는 데 사용되는 다양한 절과 명령어가 있다.
- **WHERE 절**
    - WHERE 절은 데이터베이스에서 특정한 조건을 만족하는 레코드를 선택하는 데 사용된다.
    - 이 절을 사용하여 특정한 행을 필터링하거나 선택하는 작업을 수행할 수 있다.
    - WHERE 절은 SELECT, UPDATE, DELETE 문에서 모두 사용할 수 있다.
    
    ```sql
    SELECT * FROM Customers WHERE Country = 'USA';
    ```
    
- **GROUP BY 절**
    - GROUP BY 절은 특정 열을 기준으로 데이터를 그룹화하는 데 사용된다.
    - 그룹화된 데이터는 하나 이상의 집계 함수와 함께 사용되어 그룹 내의 데이터를 요약하거나 집계할 때 유용하다.
    
    ```sql
    SELECT Country, COUNT(*) FROM Customers GROUP BY Country;
    ```
    
- **HAVING 절**
    - HAVING 절은 GROUP BY 절과 함께 사용되며, 그룹화된 데이터에 대한 필터링 조건을 정의하는 데 사용된다.
    - HAVING 절은 그룹화된 결과에 대한 조건을 지정하여 특정 집계 결과만 선택할 수 있다.
    
    ```sql
    SELECT Country, COUNT(*) FROM Customers GROUP BY Country HAVING COUNT(*) > 5;
    ```
    
- **ORDER BY 절**
    - ORDER BY 절은 결과 집합을 특정 열의 값에 따라 정렬하는 데 사용된다.
    - 오름차순(ASC) 또는 내림차순(DESC) 순서로 정렬할 수 있다.
    
    ```sql
    SELECT ProductName, UnitPrice FROM Products ORDER BY UnitPrice DESC;
    ```
    
- 이러한 절과 명령어를 사용하여 데이터를 원하는 방식으로 필터링, 그룹화, 정렬할 수 있다.
- SQL의 다양한 기능을 활용하여 데이터베이스에서 필요한 정보를 효과적으로 추출하고 조작할 수 있다.

### 문제1

```sql
SELECT FACTORY_ID, FACTORY_NAME, ADDRESS
FROM FOOD_FACTORY
WHERE ADDRESS LIKE '%강원도%'
ORDER BY FACTORY_ID ASC;
```

### 문제2

```sql
SELECT NAME
FROM ANIMAL_INS
ORDER BY DATETIME ASC
LIMIT 1;
```

### 문제3

```sql
SELECT ANIMAL_ID, NAME
FROM ANIMAL_INS
WHERE INTAKE_CONDITION IN ('Aged', 'Sick')
ORDER BY ANIMAL_ID
LIMIT 1;
```

### 문제4

```sql
SELECT COUNT(DISTINCT NAME) AS COUNT
FROM ANIMAL_INS
WHERE NAME IS NOT NULL;
```

### 문제5

```sql
SELECT MAX(PRICE) AS MAX_PRICE
FROM PRODUCT;
```